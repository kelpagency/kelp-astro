---
import Layout from "../../layouts/Layout.astro";
import { Picture } from "astro-imagetools/components";
const response = await fetch(`${import.meta.env.PUBLIC_WP_URL}/posts?per_page=100&_embed`);
const posts = await response.json();
---

<Layout title='Kelp Current'>
	<article class="our-work">
		<div class='wrapper wrapper--narrow' data-lg-reveal="layer-to-right" data-lg-reveal-stagger="0.4">
			<h1 style="margin-top: 8rem;">The Kelp Current</h1>
			<p style="margin-left: auto; font-size: var(--step-1)">
				Here you'll find expert tips and tricks from the best of Kelp. Design tips, development tricks, and maybe even some tasty strategy treats.</p>
		</div>
		<div class="wrapper our-work-list">
				{
					posts.map((post) => (
						<article data-lg-reveal="layer-to-right" data-lg-reveal-stagger="0.2">
							<div class="media">
								<Picture src={post._embedded['wp:featuredmedia'][0].source_url} alt={post.title.rendered} loading="lazy" />
							</div>
							<div class="text">
								<h2 class="h4"><a href=`/blog/${post.slug}` set:html={post.title.rendered}/></h2>
								<div set:html={post.excerpt.rendered} />
							</div>
						</article>
					))
				}
		</div>
	</article>
</Layout>
